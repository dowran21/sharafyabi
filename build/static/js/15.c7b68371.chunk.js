(this.webpackJsonpgamysh=this.webpackJsonpgamysh||[]).push([[15],{280:function(e,t,c){"use strict";c.r(t);var s=c(12),n=c(9),i=c(0),l=c(81),a=c(80),d=c(16),r=c(87),o=c(88),u=c(90),j=c(86),b=c(89),x=c(83),m=c(84),f=c(91),h=c(96),O=c(95),p=c(13),v=c(78),g=c(14),y=c(2);var w=O.c().shape({discount_type_id:O.b("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").min(3).max(4),start_date:O.a("\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),end_date:O.a("\u0414\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),min_value:O.b("\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").min(1),coupon:O.d("\u0414\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0430").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435").min(3).max(150),discount_value:O.b("").required().min(1).max(100)}),_=function(e){var t,c,s,l,a,d,r=e.visible,o=e.setCloseModal,u=Object(m.d)({resolver:Object(h.a)(w)}),j=u.register,b=u.watch,x=u.setValue,O=u.formState.errors,_=u.handleSubmit,N=u.reset,C=u.getValues,k=Object(p.b)(),A=Object(p.c)((function(e){return e.auth.token}));return Object(i.useEffect)((function(){"4"===C("discount_type_id")&&(x("min_value",2),x("coupon","wrwerw")),"3"===C("discount_type_id")&&(x("min_value",""),x("coupon","abs"))}),[b("discount_type_id")]),Object(y.jsx)(f.a,{size:"md",visible:r,setCloseModal:function(){o(),N({})},title:"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043a\u0438\u0434\u043a\u0438",children:Object(y.jsxs)("form",{onSubmit:_((function(e){console.log(e),k(Object(v.b)({url:"api/admin/add-sale",token:A,data:e,action:function(e){e.success?(console.log(e.data),g.b.success("Hey yu have added sale")):g.b.error("hey yo dont add")}}))})),className:"w-96",children:[Object(y.jsxs)("div",{className:"flex flex-col w-full relative mb-6 ",children:[Object(y.jsx)("label",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u0441\u043a\u0438\u0434\u043a\u0438"}),Object(y.jsxs)("select",{value:b("discount_type_id"),onChange:function(e){return x("discount_type_id",e.target.value)},className:"".concat(O.discount_type_id?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),children:[Object(y.jsx)("option",{value:0,children:"\u0422\u0438\u043f \u0441\u043a\u0438\u0434\u043a\u0438"},0),Object(y.jsx)("option",{value:3,children:"\u0417\u0430\u043a\u0430\u0437"},3),Object(y.jsx)("option",{value:4,children:"\u041a\u0443\u043f\u043e\u043d"},4)]}),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(t=O.discount_type_id)||void 0===t?void 0:t.message}),"4"===b("discount_type_id")&&Object(y.jsxs)("div",{className:"relative w-full mt-2",children:[Object(y.jsx)("label",{children:"\u041a\u0443\u043f\u043e\u043d"}),Object(y.jsx)("input",Object(n.a)(Object(n.a)({type:"text"},j("coupon")),{},{autoComplete:"false",className:"".concat(O.coupon?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u041a\u0443\u043f\u043e\u043d \u0434\u043b\u044f \u0432\u0430\u0441"})),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(c=O.coupon)||void 0===c?void 0:c.message})]}),"3"===b("discount_type_id")&&Object(y.jsxs)("div",{className:"relative w-full mt-2",children:[Object(y.jsx)("label",{children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430"}),Object(y.jsx)("input",Object(n.a)(Object(n.a)({type:"text"},j("min_value")),{},{autoComplete:"false",className:"".concat(O.min_value?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 200"})),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(s=O.min_value)||void 0===s?void 0:s.message})]}),Object(y.jsxs)("div",{className:"relative w-full mt-2",children:[Object(y.jsx)("label",{children:"\u0421\u043a\u0438\u0434\u043a\u0430 (\u0432 \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u0430\u0445)"}),Object(y.jsx)("input",Object(n.a)(Object(n.a)({type:"text"},j("discount_value")),{},{autoComplete:"false",className:"".concat(O.discount_value?"border-2 border-red-300 ring-red-100":"ring-indigo-600"," px-3 shadow-inner h-10 w-full text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2 "),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 50"})),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(l=O.discount_value)||void 0===l?void 0:l.message})]}),Object(y.jsxs)("div",{className:"py-3 flex flex-col",children:[Object(y.jsx)("label",{className:"pl-2 pb-3",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(y.jsx)("input",Object(n.a)(Object(n.a)({},j("start_date")),{},{type:"text",onFocus:function(e){e.currentTarget.type="date"},onBlur:function(e){return e.currentTarget.type="text"},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e",className:"ring-indigo-600 px-3 shadow-inner h-12 text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2"})),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(a=O.start_date)||void 0===a?void 0:a.message})]}),Object(y.jsxs)("div",{className:"py-3 flex flex-col",children:[Object(y.jsx)("label",{className:"pl-2 pb-3",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(y.jsx)("input",Object(n.a)(Object(n.a)({},j("end_date")),{},{type:"text",onFocus:function(e){e.currentTarget.type="date"},onBlur:function(e){return e.currentTarget.type="text"},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e",className:"ring-indigo-600 px-3 shadow-inner h-12 text-base bg-gray-50 rounded-md z-20 focus:bg-white focus:outline-none focus:ring-2"})),Object(y.jsx)("p",{className:"absolute bottom-0 left-0 -mb-4 text-xs font-medium text-red-400",children:null===(d=O.end_date)||void 0===d?void 0:d.message})]})]}),Object(y.jsx)("div",{className:"pt-5 w-full px-1",children:Object(y.jsx)("button",{type:"submit",className:"w-full rounded-xl text-center py-3 bg-green-400 text-white focus:outline-none",children:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c"})})]})})},N=c(117);function C(e,t){switch(t.type){case"SET_DATA":return Object(n.a)(Object(n.a)({},e),{},{data:t.payload.discounts,count:t.payload.count});case"CLOSE_MODAL":return Object(n.a)(Object(n.a)({},e),{},{visible:!1});case"ADD_FORM":return Object(n.a)(Object(n.a)({},e),{},{visible:!0});default:return e}}var k=function(e){var t=e.handleClick;return Object(y.jsx)("div",{className:"flex flex-row justify-between items-center",children:Object(y.jsx)(a.a,{tooltip:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u0434\u0443\u043a\u0442",handleClick:t,icon:Object(y.jsx)(x.IoMdAdd,{className:"text-2xl "})})})};t.default=function(){var e,t,c=Object(i.useReducer)(C,{loading:!1,visible:!1,data:[],count:0}),n=Object(s.a)(c,2),a=n[0],x=n[1],m=Object(p.c)((function(e){return e.auth.token})),f=Object(p.b)();return Object(i.useEffect)((function(){f(Object(v.a)({url:"api/admin/get-sales",token:m,action:function(e){e.success?x({type:"SET_DATA",payload:e.data.rows}):g.b.error("\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430")}}))}),[]),Object(y.jsxs)(l.a,{header:Object(y.jsx)(k,{handleClick:function(){return x({type:"ADD_FORM",payload:""})}}),children:[Object(y.jsx)(_,{visible:a.visible,setCloseModal:function(){return x({type:"CLOSE_MODAL",payload:""})}}),Object(y.jsx)(d.a,{loading:a.loading}),Object(y.jsx)("div",{className:"w-full h-full px-6 overflow-y-auto pb-20 ",children:Object(y.jsxs)(r.a,{children:[Object(y.jsx)(o.a,{children:Object(y.jsx)(u.a,{children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u041d\u043e\u043c\u0435\u0440 \u0441\u043a\u0438\u0434\u043a\u0438"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u0422\u0438\u043f \u0441\u043a\u0438\u0434\u043a\u0438"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0430"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u041a\u0443\u043f\u043e\u043d"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u0421\u043a\u0438\u0434\u043a\u0430"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043e\u0442 .. \u0434\u043e"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:" px-2 py-4 font-medium flex flex-row justify-start items-center ",children:"\u0423\u0434\u0430\u043b\u0438\u0442"})})]})})}),Object(y.jsx)(b.a,{children:(null===(e=a.data)||void 0===e?void 0:e.length)>0?null===(t=a.data)||void 0===t?void 0:t.map((function(e){return Object(y.jsx)(u.a,{children:Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:null===e||void 0===e?void 0:e.id})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:null===e||void 0===e?void 0:e.discount_name})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:(null===e||void 0===e?void 0:e.name)?"".concat(e.name):"\u043d\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u0430"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:(null===e||void 0===e?void 0:e.coupon)?"".concat(e.coupon):"\u043d\u0435\u0442 \u043a\u0443\u043f\u043e\u043d\u0430"})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:null===e||void 0===e?void 0:e.min_value})}),Object(y.jsx)(j.a,{children:Object(y.jsx)("div",{className:"p-2",children:null===e||void 0===e?void 0:e.discount_value})}),Object(y.jsx)(j.a,{children:Object(y.jsxs)("div",{className:"p-2 flex flex-col",children:[Object(y.jsx)("p",{children:e.low.substring(0,10)}),Object(y.jsx)("p",{children:e.upper.substring(0,10)})]})})]})},e.id)})):Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("tr",{children:Object(y.jsx)("td",{colSpan:"10",children:Object(y.jsx)("div",{className:"flex w-full h-full py-20 justify-center items-center",children:Object(y.jsx)(N.a,{title:"\u041d\u0435\u0442 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u043e\u0432"})})})})})})]})})]})}}}]);
//# sourceMappingURL=15.c7b68371.chunk.js.map