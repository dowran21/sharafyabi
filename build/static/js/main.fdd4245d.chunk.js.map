{"version":3,"sources":["utils/cookie.js","application/reducers/auth.js","application/index.js","components/BgLoader.js","application/middlewares/auth.js","application/api/index.js","components/Loader.js","application/actions/auth.js","components/PrivateRoute.js","App.js","reportWebVitals.js","index.js"],"names":["SetCookie","key","value","process","browser","cookie","set","expires","GetCookie","name","get","RemoveCookie","remove","initialState","token","isLogged","isLoading","user","reducer","state","action","type","LOGIN_SUCCESS","payload","access_token","data","USER_LOADED","LOGOUT","USER_LOADING","USER_LOAD_FAILED","combineReducers","auth","store","configureStore","BgLoader","loading","className","size","Logout","dispatch","a","logout","error","toast","LoadUser","userLoading","api","url","withCredentials","response","userLoaded","userLoadFailed","axiosInstance","axios","create","baseURL","headers","accept","Authorization","interceptors","use","originalRequest","config","status","then","console","log","defaults","catch","err","Promise","reject","contentType","post","params","update","put","delete","upload","formData","Loader","animationData","loader","loginSuccess","PrivateRoute","children","location","useLocation","useSelector","to","from","Auth","lazy","Home","App","useDispatch","useEffect","fallback","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fdd4245d.chunk.js","sourcesContent":["import cookie from 'js-cookie';\n \nexport const SetCookie = (key, value) => {\n    if (process.browser) {\n        cookie.set(key, value, { expires: 7 });\n    }\n};\n \nexport const GetCookie = (name) => {\n    if (process.browser) {\n        return cookie.get(name)\n    }return null;\n}\n \nexport const RemoveCookie = (name)=>{\n    return cookie.remove(name);\n}","import {\n    LOGIN_SUCCESS, LOGOUT, USER_LOADING, USER_LOAD_FAILED, USER_LOADED\n} from \"../actions/auth\";\n    \nconst initialState = {\n    token: \"\",\n    isLogged: false,\n    isLoading: true,\n    user: {},\n};\n    \nconst reducer = (state = initialState, action) => {\n    switch (action.type) {\n        case LOGIN_SUCCESS:\n            return {\n                ...state,\n                token: action.payload.access_token,\n                user: action.payload.data,\n                isLoading: false,\n                isLogged: true,\n            };\n        case USER_LOADED:\n            return {\n                ...state,\n                token: action.payload.access_token,\n                user: action.payload.data,\n                isLogged: true,\n                isLoading: false\n            };\n        case LOGOUT:\n            return {\n                ...state,\n                token: \"\",\n                isLogged: false,\n                isLoading: false,\n                user: {},\n            }\n        case USER_LOADING:\n            return {\n                ...state,\n                isLoading: true\n            }\n        case USER_LOAD_FAILED:\n            return {\n                ...state,\n                token: \"\",\n                isLogged: false,\n                isLoading: false,\n                user: {},\n            }\n        default:\n            return state;\n    }\n}\n    \nexport default reducer;","import { configureStore } from \"@reduxjs/toolkit\";\nimport { combineReducers } from \"redux\";\nimport auth from \"./reducers/auth\";\n \nconst reducer = combineReducers({\n    auth,\n});\n \nconst store = configureStore({\n    reducer,\n});\n \nexport default store;","import Loader from \"./Loader\"\n\nfunction BgLoader({loading}){\n    return(\n        <div className={`${loading ? 'absolute z-50 w-full h-full flex justify-center items-center' : 'hidden'}`}>\n            <Loader size=\"2xl\"/>\n            <div className=\"opacity-50 z-0 absolute w-full h-full bg-indigo-200 rounded-lg\"></div>\n        </div> \n    );\n};\n\nexport default BgLoader;","import {\n    logout, userLoading, userLoadFailed, userLoaded\n} from \"../actions/auth\";\nimport {api} from '../api';\nimport toast from 'react-hot-toast';\nimport { GetCookie, RemoveCookie } from '../../utils/cookie'\n    \nexport const Logout = () => async dispatch => {\n    try {\n        RemoveCookie('refresh_token')\n        dispatch(logout());\n    } catch (error) {\n        dispatch(logout());\n        RemoveCookie('refresh_token')\n        toast.error('Неизвестная ошибка');\n    }\n}\n    \nexport const LoadUser = () => async dispatch => {\n    dispatch(userLoading());\n    let token = GetCookie('refresh_token');\n    try {\n        if (token) {\n            const response = await api.get({ url: '/api/admin/load-admin', token, withCredentials: true });\n            dispatch(userLoaded(response.data));\n        } else {\n            dispatch(userLoadFailed());\n        }\n    } catch (error) {\n        dispatch(userLoadFailed());\n        toast.error('Неизвестная ошибка');\n    }\n}\n","\nimport axios from 'axios';\nimport store from '../index';\nimport { userLoaded } from '../actions/auth';\nimport { Logout } from '../middlewares/auth';\nimport { GetCookie } from '../../utils/cookie';\n\n\n\nconst API_BASE_URL = process.env.REACT_APP_IS_PRODUCTION === 'development' ? process.env.REACT_APP_API_BASE_URL :  process.env.REACT_APP_API_BASE_PRODUCTION_URL;\n \nexport const axiosInstance = axios.create({\n    baseURL: API_BASE_URL,\n    headers: {\n        'Content-Type': 'application/json',\n        accept: 'application/json',\n        Authorization: null\n    }\n});\n \naxiosInstance.interceptors.response.use(\n    response => response,\n    (error) => {\n        const originalRequest = error.config;\n        if (error.response.status === 401 && error.response.data === 'Unauthorized' && GetCookie('refresh_token')) {\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                    accept: 'application/json',\n                    Authorization: `Bearer ${GetCookie('refresh_token')}`,\n                },\n                withCredentials: true,\n            }\n            return axiosInstance.get('/api/load-user', config)\n            .then((response) => {\n                console.log(response)\n                axiosInstance.defaults.headers.Authorization = `Bearer ${response.data.token}`;\n                originalRequest.headers.Authorization = `Bearer ${response.data.token}`;\n                store.dispatch(userLoaded(response.data));\n                return axiosInstance(originalRequest);\n            }).catch((err) => {\n                axiosInstance.defaults.headers.Authorization = null;\n                originalRequest.headers.Authorization = null;\n                store.dispatch(Logout());\n                return Promise.reject(error);\n            });\n        } else {\n            axiosInstance.defaults.headers.Authorization = null;\n            originalRequest.headers.Authorization = null;\n            //store.dispatch(Logout());\n            return Promise.reject(error);\n        }\n    }\n);\n\n\n \nexport const api = {\n    get: async ({ url, token, withCredentials, contentType }) => {\n        const config = {\n            headers: {\n                'Content-Type': contentType ? contentType : 'application/json',\n                accept: 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            withCredentials: withCredentials\n        }\n        return await axiosInstance.get(url, config);\n    },\n    post: async ({ url, token, withCredentials, params, }) => {\n    \n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                accept: 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            withCredentials: withCredentials,\n        }\n        return await axiosInstance.post(url, params, config);\n    },\n    update: async ({ url, token, withCredentials, params }) => {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                accept: 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            withCredentials: withCredentials,\n        }\n        return await axiosInstance.put(url, params, config);\n    },\n    delete: async ({ url, token, data, withCredentials, }) => {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                accept: 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            withCredentials: withCredentials,\n            data: data\n        };\n        return await axiosInstance.delete(url, config);\n    },\n    upload: async ({ url, token, withCredentials, formData }) => {\n        const config = {\n            headers: {\n                'Content-Type': 'multipart/form-data',\n                Authorization: `Bearer ${token}`\n            },\n            withCredentials: withCredentials,\n        };\n        return await axiosInstance.post(url, formData, config);\n    }\n}\n\n// module.exports = {\n//     api,\n//     axiosInstance\n// }","import Lottie from \"lottie-react\";\nimport loader from \"../assets/loader.json\";\n\nfunction Loader({size}) {\n  return (\n      <div className={`z-50 ${size === 'xs' ? 'w-8' : size === 'sm' ? 'w-12' : size === 'md' ? 'w-16' : size === 'lg' ? 'w-20' : size === 'xl' ? 'w-24' : size === '2xl' ? 'w-28' : 'w-64' }`}>\n        <Lottie animationData={loader} />\n      </div>\n  );\n}\n\nexport default Loader;","export const LOGOUT = 'LOGOUT';\nexport const logout = () => ({\n    type: LOGOUT\n});\n \nexport const USER_LOADING = 'USER_LOADING';\nexport const userLoading = () => ({\n    type: USER_LOADING\n});\n \nexport const USER_LOAD_FAILED = 'USER_LOAD_FAILED';\nexport const userLoadFailed = () => ({\n    type: USER_LOAD_FAILED\n});\n \nexport const USER_LOADED = 'USER_LOADED';\nexport const userLoaded = (data) => ({\n    type: USER_LOADED,\n    payload: data\n});\n \nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nexport const loginSuccess = data => ({\n    type: LOGIN_SUCCESS,\n    payload: data,\n});\n\n","import BgLoader from './BgLoader';\nimport { useSelector } from 'react-redux';\nimport { Navigate, useLocation } from 'react-router-dom';\n\nconst PrivateRoute = ({ children }) => {\n  const location = useLocation();\n  const { isLogged, isLoading } = useSelector(state => state.auth);\n  if (isLoading) {\n    return <BgLoader loading={isLoading}/>;\n  }\n  if (!isLogged) {\n    return <Navigate to=\"/login\" state={{ from: location }} />;\n  }\n  return children;\n};\n\nexport default PrivateRoute;","import {Suspense, lazy} from 'react';\nimport { Route, Routes } from 'react-router-dom'\nimport PrivateRoute from './components/PrivateRoute';\nimport { LoadUser } from './application/middlewares/auth';\nimport { useEffect } from 'react';\nimport {useDispatch} from 'react-redux'\nimport { Toaster } from 'react-hot-toast';\nimport BgLoader from './components/BgLoader';\n\n\nconst Auth = lazy(() => import('./pages/Login/index'));\nconst Home = lazy(() => import('./pages/index'))\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(LoadUser());\n  }, []);// eslint-disable-line react-hooks/exhaustive-deps\n  \n  return (\n    <div className=\"relative w-full h-screen flex justify-center items-center\">\n      <Suspense fallback={<BgLoader loading={true}/>}>\n        <Routes>\n          <Route path=\"login\" element={<Auth />}/>\n          <Route\n            path=\"/*\"\n            element={\n              <PrivateRoute>\n                <Home />\n              </PrivateRoute>\n            }\n          />\n          <Route path=\"*\" element={<div>Not found</div>}/>\n        </Routes>\n      </Suspense>\n      <Toaster />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { HashRouter } from \"react-router-dom\";\nimport { Provider } from 'react-redux';\nimport store from './application/index';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <HashRouter>\n        <App />\n      </HashRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}