{"version":3,"sources":["components/Pagination.js","../node_modules/@react-icons/all-files/go/GoChecklist.js","../node_modules/@react-icons/all-files/bi/BiPrinter.js","pages/Orders/Form.js","pages/Orders/index.js"],"names":["MyPagination","limit","setLimit","setPage","count","page","className","pageSize","current","total","showTotal","range","onChange","value","e","target","GenIcon","require","module","exports","GoChecklist","props","BiPrinter","Form","visible","values","setCloseModal","token","dispatch","useDispatch","useState","items","setItems","useEffect","console","log","id","get","url","action","response","success","data","rows","toast","error","ModalContainer","size","title","name","total_price","created_at","discount_value","phone","Table","Head","Row","Cell","Body","length","map","item","name_ru","price","quantity","reducer","state","type","loading","payload","orders","trigger","Orders","useReducer","setState","useSelector","auth","showPdf","a","isBase64Encoded","body","link","document","createElement","appendChild","window","open","write","parentNode","removeChild","Date","Layout","footer","BgLoader","address","coupon","disocunt_value","IconButton","tooltip","handleClick","icon","colSpan","NoContent"],"mappings":"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","file":"static/js/15.7b02f46e.chunk.js","sourcesContent":["import Pagination from 'rc-pagination';\n\nconst MyPagination = ({limit, setLimit, setPage, count, page}) =>{\n    return (\n        <div className=\"relative flex flex-row w-full justify-between px-2\">\n            <div></div>\n            <Pagination\n                pageSize={limit}\n                current={page + 1}\n                // hideOnSinglePage\n                className=\"\" \n                total={count} \n                showTotal={(total, range) =>\n                    <div className=\"hidden md:flex absolute top-0 left-2\">{`${range[0]} - ${range[1]} из ${total}`}</div>\n                }\n                onChange={(page) => setPage(page - 1)}\n                \n            />\n            <select className=\"focus:outline-none p-1\" value={limit} onChange={(e) => setLimit(e.target.value)}> \n                <option value={10}>\n                    10\n                </option>\n                <option value={20}>\n                    20\n                </option>\n                <option value={30}>\n                    30\n                </option>\n                <option value={40}>\n                    40\n                </option>\n                <option value={50}>\n                    50\n                </option>\n            </select>\n        </div>\n    );\n};\n\nexport default MyPagination;\n\n","// THIS FILE IS AUTO GENERATED\nvar GenIcon = require('../lib').GenIcon\nmodule.exports.GoChecklist = function GoChecklist (props) {\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"viewBox\":\"0 0 16 16\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"fillRule\":\"evenodd\",\"d\":\"M16 8.5l-6 6-3-3L8.5 10l1.5 1.5L14.5 7 16 8.5zM5.7 12.2l.8.8H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h7c.55 0 1 .45 1 1v6.5l-.8-.8c-.39-.39-1.03-.39-1.42 0L5.7 10.8a.996.996 0 0 0 0 1.41v-.01zM4 4h5V3H4v1zm0 2h5V5H4v1zm0 2h3V7H4v1zM3 9H2v1h1V9zm0-2H2v1h1V7zm0-2H2v1h1V5zm0-2H2v1h1V3z\"}}]})(props);\n};\n","// THIS FILE IS AUTO GENERATED\nvar GenIcon = require('../lib').GenIcon\nmodule.exports.BiPrinter = function BiPrinter (props) {\n  return GenIcon({\"tag\":\"svg\",\"attr\":{\"viewBox\":\"0 0 24 24\"},\"child\":[{\"tag\":\"path\",\"attr\":{\"d\":\"M19,7h-1V2H6v5H5c-1.654,0-3,1.346-3,3v7c0,1.103,0.897,2,2,2h2v3h12v-3h2c1.103,0,2-0.897,2-2v-7C22,8.346,20.654,7,19,7 z M8,4h8v3H8V4z M16,20H8v-4h8V20z M20,17h-2v-1v-2H6v2v1H4v-7c0-0.551,0.449-1,1-1h14c0.552,0,1,0.449,1,1V17z\"}},{\"tag\":\"path\",\"attr\":{\"d\":\"M14 10H18V12H14z\"}}]})(props);\n};\n","import { useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { useDispatch } from \"react-redux\";\nimport { get } from \"../../application/middlewares\";\nimport ModalContainer from \"../../components/ModalContainer\";\nimport Table from \"../../components/Table/Table\"\nimport Head from \"../../components/Table/Head\"\nimport Row from \"../../components/Table/Row\"\nimport Cell from \"../../components/Table/Cell\"\nimport Body from \"../../components/Table/Body\"\n\nfunction Form({visible, values, setCloseModal, token}){\n    const dispatch = useDispatch();\n    const [items, setItems] = useState([])\n    useEffect(()=>{\n        console.log(values)\n        if(values.id){\n            console.log(\"I am in if \")\n            dispatch(get({\n                url:`api/admin/get-order/${values.id}`,\n                token,\n                action: (response) =>{\n                    // console.log(response.data?.rows)\n                    if(response.success){\n                        // console.log(response.data?.rows)\n                        // console.log(response)\n                        setItems(response.data.rows)\n                    }else{\n                        toast.error(\"Неизвестная ошибка\")\n                    }\n                }\n            }))\n        }\n    }, [values])\n    useEffect(()=>{\n        console.log(items)\n    }, [items])\n    return (\n        <ModalContainer size = \"md\"\n            visible = {visible}\n            setCloseModal = {()=>setCloseModal()}\n            title = {`Заказ №${values.id}`}\n        >\n            <div className = \"min-w-600 flex flex-col\">\n                <div >\n                    <div className = \"flex flex-row p-1 justify-between items-center\">\n                        <p>Заказ от: </p> <p>{values.name}</p>\n                    </div>\n                    <div className = \"flex flex-row p-1 justify-between items-center\">\n                        <p>Номер Заказа:</p> <p>{values.id}</p>\n                    </div>\n                    <div className = \"flex flex-row p-1 justify-between items-center \">\n                        <p>общая сумма:</p> <p>{values.total_price}</p>\n                    </div>\n                    <div className = \"flex flex-row p-1 justify-between items-center \">\n                        <p>Время заказа:</p> <p>{values.created_at}</p>\n                    </div>\n                    <div className = \"flex flex-row p-1 justify-between items-center \">\n                        <p>Скидка:</p> <p>{values.discount_value} %</p> \n                    </div>\n                    <div className = \"flex flex-row p-1 justify-between items-center \">\n                        <p>Контактный номер:</p> <p>{values.phone} </p>\n                    </div>\n                </div>\n                <div>\n                    <Table>\n                        <Head>\n                            <Row>\n                                <>\n                                <Cell>\n                                    <div  className={` px-2 py-4 text-sm font-medium flex flex-row justify-start items-center `}>\n                                        Имя\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div  className={` px-2 py-4 text-sm font-medium flex flex-row justify-start items-center `}>\n                                        Цена\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div  className={` px-2 py-4 text-sm font-medium flex flex-row justify-start items-center `}>\n                                        Скидка (%)\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div  className={` px-2 py-4 text-sm font-medium flex flex-row justify-start items-center `}>\n                                        Количество\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div  className={` px-2 py-4 text-sm font-medium flex flex-row justify-start items-center `}>\n                                        Сумма\n                                    </div>\n                                </Cell>\n                                </>\n                            </Row>\n                        </Head>\n                        <Body>\n                            {items?.length > 0 ?\n                                items?.map(item => (\n                                    <Row>\n                                        <>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                {item.name ? item.name : item.name_ru}\n                                            </div>\n                                        </Cell>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                {item.price}\n                                            </div>\n                                        </Cell>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                {item.discount_value ? item.discount_value : `нет`}\n                                            </div>\n                                        </Cell>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                {item.quantity}\n                                            </div>\n                                        </Cell>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                {item.discount_value ? item.price*item.discount_value*item.quantity*0.01 : item.price*item.quantity}\n                                            </div>\n                                        </Cell>\n                                        <Cell>\n                                            <div className = \"p-1\">\n                                                \n                                            </div>\n                                        </Cell>\n                                        </>\n                                    </Row>\n                                ))\n                            :\n                            <>\n                            </>\n                            }\n                        </Body>\n                    </Table>\n                </div>\n            </div>\n\n        </ModalContainer>\n    )\n}\n\nexport default Form;","import Layout from \"../../components/Layout\"\nimport IconButton from \"../../components/IconButton\"\nimport {IoMdAdd} from \"@react-icons/all-files/io/IoMdAdd\"\nimport { useEffect, useReducer } from \"react\"\n// import Form from \"./Form\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { get, post } from \"../../application/middlewares\"\nimport BgLoader from \"../../components/BgLoader\"\nimport Table from \"../../components/Table/Table\"\nimport Head from \"../../components/Table/Head\"\nimport Row from \"../../components/Table/Row\"\nimport Cell from \"../../components/Table/Cell\"\nimport Body from \"../../components/Table/Body\"\nimport toast from \"react-hot-toast\"\nimport NoContent from \"../../components/NoContent\"\nimport {BiPrinter} from \"@react-icons/all-files/bi/BiPrinter\"\nimport {GoChecklist} from \"@react-icons/all-files/go/GoChecklist\"\nimport Form from \"./Form\"\nimport MyPagination from \"../../components/Pagination\"\n\nfunction reducer(state, action){\n    console.log(action)\n    switch(action.type){\n        case \"SET_LOADING\":\n            return {\n                ...state,\n                loading:action.payload\n            }\n        case \"SET_DATA\":\n            return {\n                ...state, \n                data:action.payload.orders,\n                count:+action.payload.count\n            }\n        case \"CLOSE_MODAL\":\n            return {\n                ...state,\n                visible:false\n            }\n        case \"SHOW_ITEMS\":\n            return {\n                ...state,\n                values:action.payload,\n                visible:true                \n            }\n        case 'SET_LIMIT':\n            return{\n                ...state,\n                limit:action.payload,\n                page:0,\n                trigger:!state.trigger,\n                loading:true\n            }\n        case 'SET_PAGE':\n            return{\n                ...state,\n                page:action.payload,\n                trigger:!state.trigger,\n                loading:true\n            }\n        default: return state\n    }\n}\n\nfunction Orders (){\n    const [state, setState] = useReducer(reducer, {\n        loading:false, data:[], visible:false, values:'', page:0, limit:20\n    })\n    const dispatch = useDispatch();\n    const token = useSelector(state => state.auth.token)\n\n    useEffect(()=>{\n        dispatch(get({\n            url:`api/admin/get-orders?page=${state.page}&limit=${state.limit}`,\n            token,\n            action: (response) =>{\n                if(response.success){\n                    console.log(response.data.rows)\n                    setState({type:\"SET_DATA\", payload:response.data.rows})\n                }else{\n                    setState({type:\"SET_LOADING\", payload:false})\n                    toast.error(\"Неизвестная ошибка\")\n                }\n            }\n        }))\n    }, [state.trigger])\n\n    // const showPdf = (id) =>{\n    //     console.log(id)\n    // }\n    const showPdf = async (id) => {\n        // const rows = await GeneratePdf(id);\n        dispatch(get({\n            url:`/api/admin/generate-pdf/${id}`,\n            token,\n            action: (response) =>{\n                if(response.success){\n                    const rows = response.data;\n                    console.log(rows.isBase64Encoded)\n                    if(rows?.isBase64Encoded){\n                        const url = `data:application/pdf;base64,${rows.body}`;\n                        const link = document.createElement('a');\n                        document.body.appendChild(link);\n                        // console.log(document.body.appendChild(link))\n                        \n                        let pdfWindow = window.open(\"\")\n                        pdfWindow.document.write(\n                            `<iframe width='100%' height='100%' src='${url}'></iframe>`\n                        )\n                    \n                        // // Clean up and remove the link\n                        link.parentNode.removeChild(link);   \n                    }\n                }else{\n                    toast.error(\"Неизвестная ошибка\")\n                }\n            }\n        }))\n        const rows = {}\n        const d = new Date();\n        // console.log(rows)\n        console.log(rows.isBase64Encoded)\n        if(rows?.isBase64Encoded){\n            const url = `data:application/pdf;base64,${rows.body}`;\n            const link = document.createElement('a');\n            document.body.appendChild(link);\n            // console.log(document.body.appendChild(link))\n            \n            let pdfWindow = window.open(\"\")\n            pdfWindow.document.write(\n                `<iframe width='100%' height='100%' src='${url}'></iframe>`\n            )\n        \n            // // Clean up and remove the link\n            link.parentNode.removeChild(link);   \n        }\n        // setOrders(orders.map(item =>{\n        //     if (item.id === id){\n        //         item.has_seen = true \n        //     }return item\n        // }))\n    }\n    return (\n        <Layout \n            footer={<MyPagination setPage={(value) => setState({type:'SET_PAGE', payload:value})} limit={+state.limit} count={+state.count} page={state.page} setLimit={(value) => setState({type:'SET_LIMIT', payload:value})}/>}\n\n        >\n            <BgLoader loading = {state.loading}/>\n            <Form\n                visible = {state.visible}\n                setCloseModal = {()=>setState({type:\"CLOSE_MODAL\", payload:false})}\n                values = {state.values}\n                token = {token}\n            />\n            <div className=\"w-full h-full px-6 overflow-y-auto pb-20 \">\n                <Table>\n                    <Head>\n                        <Row>\n                            <>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Номер\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Покупатель\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Аддрес\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Контактный номер\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    время\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Купон\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Сумма\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Скидка\n                                </div>\n                            </Cell>\n                            <Cell>\n                                <div  className={` px-2 py-4 font-medium flex flex-row justify-start items-center `}>\n                                    Действия\n                                </div>\n                            </Cell>\n                            </>\n                        </Row>\n                    </Head>\n                    {state.data?.length > 0 ?\n                    <Body>\n                        {state.data.map(item => (\n                            <Row key = {item.id}>\n                                <>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.id}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.name}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.address}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.phone}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.created_at}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.coupon ? item.coupon : `Нет купона`}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.total_price}\n                                    </div>\n                                </Cell>\n                                <Cell>\n                                    <div className = \"p-2\">\n                                        {item.disocunt_value ? item.disocunt_value : `Нет скидки`}\n                                    </div>\n                                </Cell>\n                                    <div className = \"p-2 flex flex-row\">\n                                        <IconButton tooltip = {\"Просмотреть\"} handleClick = {()=>setState({type:\"SHOW_ITEMS\", payload:item})} icon = {<GoChecklist className = \"text-2xl\"/>}/>\n                                        <IconButton tooltip = {\"Распечатать\"} handleClick = {()=>showPdf(item.id)} icon = {<BiPrinter className = \"text-2xl\"/>}/>\n                                    </div>\n                                </>\n                            </Row>\n                        ))}\n                    </Body>\n\n                    :\n                    <tr>\n                        <td colSpan=\"10\" >\n                            <div className=\"flex w-full h-full py-20 justify-center items-center\">\n                                <NoContent title=\"Нет Категорий\"/>\n                            </div>\n                        </td>\n                    </tr>    \n                }\n                </Table>\n            </div>\n        </Layout>\n    )\n}\n\nexport default Orders"],"sourceRoot":""}